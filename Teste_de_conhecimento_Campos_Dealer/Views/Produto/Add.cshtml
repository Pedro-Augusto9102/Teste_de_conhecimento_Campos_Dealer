@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@model Teste_de_conhecimento_Campos_Dealer.Models.AddProdutoViewModel

<h1>Adicionar Produto</h1>
<form method="post">
    <div class="mt-3">
        <label class="form-label">Descrição</label>
        <input type="text" class="form-control" asp-for="dscProduto" />
    </div>

    <div class="mt-3">
        <label class="form-label">Valor</label>
        <input type="text" id="currency" class="form-control" placeholder="R$0.00" oninput="formatCurrency(this)" asp-for="vlrUnitário" />
    </div>

    <div class="mt-3">
        <button type="submit" class="btn btn-primary">Salvar</button>
    </div>
</form>

@section scripts{
    <script>
        let input = document.getElementById("currency")
        let format = new Intl.NumberFormat("pt-BR", { style: "currency", currency: "BRL" });

        input.addEventListener("input", function (e) {
            // Remove non-numeric characters
            let value = e.target.value.replace(/[^0-9]/g, '');

            // Convert to number
            value = parseInt(value, 10);

            // Check if the value is a valid number
            if (!isNaN(value)) {
                // Format the number as currency
                e.target.value = format.format(value / 100); // Divide by 100 to get the correct decimal placement
            }
        });
    </script>
}