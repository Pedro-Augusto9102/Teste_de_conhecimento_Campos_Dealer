@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@model Teste_de_conhecimento_Campos_Dealer.Models.AddProdutoViewModel

<h1>Adicionar Produto</h1>
<form method="post">
    <div class="mt-3">
        <label class="form-label">Descrição</label>
        <input type="text" class="form-control" asp-for="dscProduto" required/>
    </div>

    <div class="mt-3">
        <label class="form-label">Valor</label>
        <input type="text" step="0.01" id="valorMonetario" class="form-control" placeholder="R$0.00" oninput="formatCurrency(this)" asp-for="vlrUnitário" required/>
    </div>

    <div class="mt-3">
        <button type="submit" class="btn btn-primary">Salvar</button>
    </div>
</form>

@section scripts{
    <script>
        const input = document.getElementById('valorMonetario');

        // Adiciona um event listener para formatar o valor ao digitar
        input.addEventListener('input', function (e) {
            // Remove qualquer formatação existente
            let valor = input.value.replace(/\D/g, '');

            // Formata como valor monetário
            valor = Number(valor / 100).toFixed(2).replace('.', ',').replace(/(\d)(?=(\d{3})+,)/g, '$1.');

            // Atualiza o valor do input
            input.value = 'R$ ' + valor;
        });
    </script>
}